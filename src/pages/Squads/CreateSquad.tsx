import {useNavigate} from "react-router-dom";
import {useState} from "react";
import squadService from "../../services/squad.service.ts";
import {userState} from "../../state/UserState.ts";
import {useBackButton} from "@tma.js/sdk-react";

const CreateSquad = () => {
    const navigate = useNavigate();
    const [name, setName] = useState<string>("")
    const backButton = useBackButton();

    const onClickCreateButtonHandler = () => {
        if (name.length === 0) return;
        squadService.createSquad(name, String(userState.user_id)).then(() => {
            navigate(-1);
        })

        backButton.show();
        backButton.on('click', () => {
            navigate(-1)
        })
    }

    const onChangeHandler = (e: any) => {
        setName(e.target.value);
    }

    return (
        <div className="create-squad-page">
            <div className="create-squad-page__header">
                <div className="create-squad-page__title">Create your own squad</div>
            </div>
            <div className="create-squad-page__field">
                <input type="text" className="input" placeholder="Squad name" onChange={onChangeHandler}/>
            </div>
            <button className="button" onClick={onClickCreateButtonHandler}>
                Create
            </button>
            <div className="earn-page__button" onTouchStart={() => navigate(-1)}>
                <svg viewBox="0 0 286.4 79">
                    <path className="cls-1"
                          d="m261.13,0c.46,0,.91,0,1.37,0,.28.05.57.12.85.13,4.7.25,9.21,1.26,13.44,3.39,2.76,1.39,4.64,3.49,5.59,6.45,1.03,3.22,1.48,6.53,1.68,9.88.35,5.62.75,11.24.93,16.86.26,7.92-.19,15.82-.98,23.7-.35,3.5-.98,6.93-2.27,10.25-1.53,3.95-4.39,5.96-8.55,6.14-7.04.3-14.08.61-21.12.74-4.53.08-9.07-.24-13.6-.23-5.8,0-11.61.11-17.41.28-7.24.2-14.47.57-21.71.75-7.14.18-14.29.25-21.44.31-5.97.05-11.94.04-17.91,0-5.74-.03-11.49-.08-17.23-.2-7.21-.15-14.41-.34-21.62-.59-5.67-.2-11.33-.6-17-.75-5.74-.15-11.48-.13-17.22-.12-7.31,0-14.62.11-21.93.09-8.32-.02-16.65-.13-24.97-.18-5.45-.04-10.9-.07-16.35-.06-4.4.01-8.81.14-13.21.12-3.49-.02-6.07-1.67-7.81-4.69-1.75-3.05-2.43-6.37-2.48-9.82-.03-2.04.28-4.09.34-6.14.2-6.74.38-13.47.53-20.21.14-5.96.18-11.92,1.06-17.83.52-3.51,1.17-7,2.9-10.16,1.58-2.9,3.64-5.3,7.09-5.92,2.18-.39,4.38-.7,6.59-.8,8.16-.38,16.3.19,24.43.82,5.8.45,11.6.54,17.4.27,7.26-.33,14.52-.82,21.79-1.05,6.52-.21,13.05-.32,19.58-.21,4.26.07,8.52.54,12.76.93,2.13.2,4.25.94,6.37.89,3.14-.08,6.28-.59,9.4-1.01,3.01-.41,5.98-.84,9.05-.52,3.56.37,7.14.65,10.72.73,3.85.09,7.7-.15,11.55-.15,4.99,0,9.98.15,14.98.17,4.44.01,8.88-.15,13.31-.09,9.3.12,18.59.36,27.89.48,6.85.09,13.7.14,20.55.09,2.93-.02,5.87-.2,8.78-.57,3.19-.4,6.34-1.14,9.51-1.67,1.43-.24,2.89-.35,4.34-.52Zm22.32,42.05c-.23-6.05-.3-10.65-.62-15.23-.31-4.44-.77-8.88-1.36-13.29-.47-3.49-2.08-6.36-5.52-7.85-6.28-2.73-12.77-3.85-19.54-2.43-5.63,1.18-11.31,1.91-17.06,1.95-7.77.06-15.53,0-23.3-.08-6.07-.05-12.14-.24-18.2-.28-7.9-.04-15.8.04-23.7.01-5.84-.02-11.68-.14-17.52-.18-2.51-.01-5.03.21-7.53.1-3.45-.16-6.88-.58-10.33-.83-4.08-.3-8.04.61-12.03,1.22-2.72.41-5.47.78-8.17.2-5.74-1.24-11.55-1.67-17.38-1.63-7.31.06-14.61.29-21.91.52-5.44.17-10.88.46-16.32.67-3.16.12-6.32.31-9.48.26-3.91-.06-7.82-.31-11.72-.51-3.68-.19-7.35-.55-11.04-.61-5.25-.09-10.5-.14-15.74.09-3.51.16-6.51,1.64-8.23,4.95-.66,1.26-1.27,2.57-1.67,3.93-1.48,4.96-1.89,10.09-2.09,15.23-.21,5.66-.28,11.33-.41,16.99-.06,2.7-.09,5.4-.19,8.1-.12,3.22-.43,6.44-.41,9.65.02,3,.79,5.86,2.54,8.37,1.44,2.06,3.38,3.2,5.95,3.13,1.79-.05,3.59-.15,5.38-.15,15.31.02,30.62.07,45.93.08,5.58,0,11.16-.11,16.74-.07,8.91.05,17.81.09,26.72.31,8.11.2,16.22.65,24.34.94,5.31.19,10.63.33,15.95.39,8.25.09,16.51.12,24.77.11,8.22-.02,16.45-.08,24.67-.2,5.61-.08,11.22-.29,16.82-.46,7.89-.24,15.78-.57,23.67-.71,4.07-.07,8.15.31,12.22.27,6.36-.06,12.72-.29,19.07-.48,2.51-.08,5.02-.18,7.51-.43,2.69-.27,4.64-1.63,5.78-4.19,1.29-2.89,1.98-5.94,2.22-9.05.52-6.75.87-13.51,1.2-18.82Z"/>
                    <path fill="#fff"
                          d="m283.45,42.05c-.33,5.31-.67,12.07-1.2,18.82-.24,3.11-.93,6.15-2.22,9.05-1.14,2.55-3.09,3.92-5.78,4.19-2.49.25-5,.35-7.51.43-6.36.2-12.71.42-19.07.48-4.07.04-8.15-.34-12.22-.27-7.89.14-15.78.47-23.67.71-5.61.17-11.21.38-16.82.46-8.22.12-16.45.18-24.67.2-8.26.02-16.51-.02-24.77-.11-5.32-.06-10.63-.2-15.95-.39-8.11-.28-16.22-.74-24.34-.94-8.9-.22-17.81-.25-26.72-.31-5.58-.03-11.16.08-16.74.07-15.31-.01-30.62-.06-45.93-.08-1.79,0-3.59.1-5.38.15-2.57.07-4.51-1.07-5.95-3.13-1.75-2.51-2.53-5.37-2.54-8.37-.02-3.22.29-6.43.41-9.65.1-2.7.13-5.4.19-8.1.13-5.66.2-11.33.41-16.99.19-5.14.6-10.27,2.09-15.23.41-1.36,1.02-2.67,1.67-3.93,1.72-3.31,4.73-4.8,8.23-4.95,5.24-.23,10.5-.18,15.74-.09,3.68.07,7.36.42,11.04.61,3.91.2,7.81.46,11.72.51,3.16.05,6.32-.14,9.48-.26,5.44-.21,10.88-.5,16.32-.67,7.3-.23,14.61-.46,21.91-.52,5.84-.04,11.65.39,17.38,1.63,2.71.58,5.46.22,8.17-.2,3.99-.61,7.95-1.52,12.03-1.22,3.44.25,6.88.67,10.33.83,2.5.12,5.02-.11,7.53-.1,5.84.03,11.68.16,17.52.18,7.9.02,15.8-.06,23.7-.01,6.07.03,12.14.22,18.2.28,7.77.07,15.53.14,23.3.08,5.74-.05,11.42-.77,17.06-1.95,6.77-1.42,13.27-.3,19.54,2.43,3.44,1.49,5.05,4.36,5.52,7.85.59,4.41,1.05,8.85,1.36,13.29.32,4.58.38,9.17.62,15.23ZM76.57,22.92c-.3.3-.96.68-1.24,1.25-2.46,5.05-4.77,10.17-6.44,15.55-1.1,3.54-.79,4.85,2.14,7.13,3.75,2.92,7.61,5.7,11.44,8.52,1.03.76,2.28.57,3.02-.39.7-.91.52-2.13-.46-2.94-.5-.42-1.06-.76-1.58-1.15-3.2-2.41-6.41-4.81-9.58-7.25-1.39-1.07-1.43-1.13-.86-2.75.9-2.57,1.83-5.13,2.86-7.65.97-2.37,2.05-4.7,3.16-7.02.68-1.43-.31-3.16-2.45-3.29Zm85.49,14.05c-.52-.27-.97-.69-1.43-.72-1.71-.08-3.44-.1-5.15,0-.56.03-1.14.45-1.63.8-.6.43-1.1,1-1.69,1.46-1.98,1.52-2.38,3.7-.93,5.76,1.25,1.77,2.9,3.12,5.06,3.6,2.21.49,4.36,1.31,6.67-.17.99-.64,1.53-1.22,1.59-2.26.18-2.95.33-5.91.44-8.87.13-3.63-1.22-6.48-4.35-8.5-2.15-1.39-3.53-1.49-5.46.19-1.54,1.34-2.97,2.82-4.4,4.28-.54.55-.56,1.26-.08,1.87.48.61,1.18.84,1.82.36.88-.65,1.67-1.43,2.48-2.18.81-.75,1.57-1.55,2.37-2.31.38-.36.75-.3,1.22-.04,2.68,1.47,3.71,3.76,3.48,6.73Zm9.72-.84c.05-.77.1-1.35.12-1.92.08-3.22.2-6.44.21-9.66,0-1.17-.67-1.72-1.61-1.66-.94.06-1.29.69-1.31,1.91-.05,3.22-.23,6.44-.22,9.66.01,3.83.14,7.66.3,11.49.05,1.18.83,1.75,1.78,1.57.87-.16,1.26-.96,1.08-2.07-.14-.87-.21-1.74-.31-2.65.15.04.19.04.21.06.2.17.39.34.59.51,1.94,1.63,3.83,3.31,6.51,3.72,2.17.33,3.41.03,4.32-1.39.49-.76.41-1.63-.23-2.1-.73-.53-1.37-.31-2.04.21-.31.24-.78.44-1.15.39-3.37-.39-5.25-2.98-7.62-5.08.92-.49,1.65-.98,2.45-1.29,3.14-1.23,6.29-2.42,9.45-3.61.64-.24,1.04-.63,1.06-1.36.01-.76-.36-1.29-1.07-1.42-.52-.09-1.13-.08-1.62.11-2.95,1.12-5.87,2.29-8.79,3.47-.68.27-1.3.68-2.1,1.11Zm21,2.98c.9-.47,1.59-.92,2.34-1.22,3.17-1.25,6.35-2.46,9.53-3.67.68-.26,1.1-.66,1.09-1.42,0-.77-.42-1.28-1.13-1.37-.59-.07-1.26,0-1.81.21-3.22,1.29-6.42,2.64-9.63,3.97-.31.13-.61.26-1.02.43.11-1.77.25-3.39.3-5.01.06-2.18.09-4.36.03-6.54-.03-1.14-.72-1.7-1.67-1.6-.89.09-1.23.71-1.25,1.87-.05,3.25-.24,6.5-.23,9.75.01,3.83.15,7.66.31,11.49.05,1.11.81,1.66,1.73,1.51.88-.14,1.3-.94,1.13-2.04-.14-.88-.22-1.77-.35-2.84.37.32.59.51.8.7,1.94,1.63,3.82,3.32,6.5,3.74,2.24.35,3.59,0,4.44-1.51.39-.71.35-1.39-.28-1.94-.61-.52-1.38-.5-1.85.06-.62.74-1.27.6-2,.43-2.98-.7-4.77-3.01-6.98-5.01Zm-55.52-4.87c0-3.72,0-7.33,0-10.94,0-.38,0-.79-.13-1.15-.24-.69-.77-1.08-1.5-.98-.7.1-1.25.51-1.24,1.28.02,5.11.06,10.22.12,15.33.02,1.44.15,2.89.24,4.45-.5-.21-.81-.39-1.14-.47-.72-.17-1.31.08-1.65.73-.33.64-.28,1.33.31,1.77.95.69,2,1.23,2.96,1.94,1.18.86,2.77,1.24,4.23,1.64,3.55.97,6.68-1.33,6.87-4.96.03-.52.15-1.04.12-1.55-.09-1.38.14-2.95-.44-4.1-1.45-2.88-5.02-4.67-8.74-2.99Zm-47.74-9c-.2.17-.77.44-.99.88-2.17,4.4-4.18,8.86-5.58,13.58-.5,1.67-.49,3.28,1.01,4.44,3.5,2.71,7.04,5.36,10.59,8.01.73.55,1.71.32,2.28-.37.51-.62.5-1.62-.07-2.24-.28-.31-.64-.55-.98-.81-2.93-2.22-5.86-4.45-8.81-6.65-.65-.49-.8-1.02-.54-1.76.41-1.13.71-2.3,1.17-3.4,1.24-2.96,2.55-5.9,3.83-8.84.63-1.44-.13-2.81-1.93-2.84Z"/>
                    <path className="cls-1"
                          d="m76.57,22.92c2.14.13,3.13,1.86,2.45,3.29-1.1,2.32-2.18,4.65-3.16,7.02-1.03,2.52-1.97,5.08-2.86,7.65-.57,1.63-.53,1.68.86,2.75,3.18,2.44,6.39,4.84,9.58,7.25.52.39,1.08.74,1.58,1.15.99.82,1.16,2.04.46,2.94-.74.96-1.99,1.15-3.02.39-3.83-2.82-7.68-5.61-11.44-8.52-2.93-2.28-3.24-3.59-2.14-7.13,1.67-5.38,3.98-10.5,6.44-15.55.28-.57.93-.95,1.24-1.25Z"/>
                    <path className="cls-1"
                          d="m162.06,36.96c.23-2.97-.8-5.26-3.48-6.73-.47-.26-.85-.32-1.22.04-.8.76-1.56,1.56-2.37,2.31-.8.75-1.6,1.53-2.48,2.18-.64.48-1.34.25-1.82-.36-.48-.61-.46-1.32.08-1.87,1.44-1.46,2.86-2.94,4.4-4.28,1.93-1.68,3.31-1.58,5.46-.19,3.13,2.02,4.48,4.87,4.35,8.5-.11,2.96-.26,5.91-.44,8.87-.06,1.05-.6,1.62-1.59,2.26-2.3,1.48-4.46.66-6.67.17-2.16-.48-3.81-1.83-5.06-3.6-1.45-2.06-1.05-4.24.93-5.76.59-.45,1.09-1.03,1.69-1.46.49-.35,1.07-.76,1.63-.8,1.71-.1,3.43-.09,5.15,0,.46.02.91.44,1.43.72Zm-.37,3.72c-.88.04-1.58-.24-1.92-1.22-.08-.24-.53-.48-.82-.5-1.45-.1-2.95-.3-3.98,1.15-.16.23-.46.35-.7.52-1.16.82-1.24,1.48-.24,2.51,2.07,2.14,4.66,2.62,7.65,2.36v-4.82Z"/>
                    <path className="cls-1"
                          d="m171.78,36.12c.8-.43,1.42-.84,2.1-1.11,2.92-1.19,5.85-2.35,8.79-3.47.49-.19,1.1-.2,1.62-.11.72.13,1.09.65,1.07,1.42-.01.73-.42,1.11-1.06,1.36-3.15,1.19-6.31,2.38-9.45,3.61-.8.32-1.53.8-2.45,1.29,2.37,2.1,4.24,4.69,7.62,5.08.37.04.84-.16,1.15-.39.66-.51,1.31-.74,2.04-.21.64.47.72,1.34.23,2.1-.92,1.42-2.16,1.72-4.32,1.39-2.68-.41-4.57-2.09-6.51-3.72-.2-.17-.39-.34-.59-.51-.02-.02-.06-.02-.21-.06.1.91.17,1.79.31,2.65.18,1.11-.21,1.91-1.08,2.07-.94.17-1.73-.4-1.78-1.57-.16-3.83-.28-7.66-.3-11.49-.01-3.22.18-6.44.22-9.66.02-1.22.37-1.85,1.31-1.91.94-.07,1.61.49,1.61,1.66,0,3.22-.12,6.44-.21,9.66-.01.57-.07,1.15-.12,1.92Z"/>
                    <path className="cls-1"
                          d="m192.78,39.1c2.22,2,4.01,4.31,6.98,5.01.73.17,1.38.3,2-.43.47-.56,1.24-.58,1.85-.06.64.54.68,1.23.28,1.94-.85,1.52-2.2,1.87-4.44,1.51-2.68-.42-4.56-2.11-6.5-3.74-.22-.18-.43-.37-.8-.7.13,1.08.21,1.97.35,2.84.18,1.1-.24,1.9-1.13,2.04-.93.15-1.69-.4-1.73-1.51-.16-3.83-.3-7.66-.31-11.49-.01-3.25.18-6.5.23-9.75.02-1.16.36-1.77,1.25-1.87.94-.1,1.63.45,1.67,1.6.06,2.18.03,4.36-.03,6.54-.04,1.62-.19,3.24-.3,5.01.41-.17.71-.3,1.02-.43,3.21-1.33,6.41-2.68,9.63-3.97.55-.22,1.22-.28,1.81-.21.71.09,1.12.6,1.13,1.37,0,.77-.41,1.16-1.09,1.42-3.18,1.21-6.36,2.42-9.53,3.67-.75.3-1.44.74-2.34,1.22Z"/>
                    <path className="cls-1"
                          d="m137.27,34.23c3.73-1.68,7.29.11,8.74,2.99.58,1.15.35,2.72.44,4.1.03.51-.09,1.03-.12,1.55-.19,3.63-3.32,5.94-6.87,4.96-1.46-.4-3.05-.77-4.23-1.64-.96-.7-2.01-1.24-2.96-1.94-.6-.44-.64-1.13-.31-1.77.33-.65.93-.9,1.65-.73.34.08.65.26,1.14.47-.09-1.57-.22-3.01-.24-4.45-.06-5.11-.1-10.22-.12-15.33,0-.77.54-1.18,1.24-1.28.74-.1,1.27.29,1.5.98.12.36.13.76.13,1.15,0,3.61,0,7.22,0,10.94Zm6.3,6.06c.51-2.38-1.9-3.8-3.68-3.81-1.15,0-2.42,1.23-2.4,2.34.02,1.46-.01,2.92.05,4.37.01.32.22.79.48.91.81.39,1.66.75,2.54.95,1.52.34,2.76-.69,2.85-2.24.05-.81.1-1.62.16-2.52Z"/>
                    <path className="cls-1"
                          d="m89.53,25.22c1.8.03,2.56,1.4,1.93,2.84-1.28,2.95-2.59,5.88-3.83,8.84-.46,1.1-.77,2.27-1.17,3.4-.27.74-.11,1.27.54,1.76,2.95,2.2,5.87,4.43,8.81,6.65.34.25.69.5.98.81.57.62.58,1.62.07,2.24-.56.69-1.55.92-2.28.37-3.55-2.64-7.09-5.3-10.59-8.01-1.5-1.16-1.51-2.77-1.01-4.44,1.4-4.71,3.41-9.18,5.58-13.58.22-.44.8-.71.99-.88Z"/>
                    <path fill="#fff"
                          d="m161.69,40.68v4.82c-2.99.26-5.58-.23-7.65-2.36-1.01-1.04-.93-1.69.24-2.51.24-.17.54-.29.7-.52,1.03-1.45,2.52-1.25,3.98-1.15.29.02.74.26.82.5.33.98,1.04,1.26,1.92,1.22Z"/>
                    <path fill="#fff"
                          d="m143.57,40.28c-.06.9-.12,1.71-.16,2.52-.09,1.55-1.33,2.58-2.85,2.24-.88-.2-1.73-.56-2.54-.95-.25-.12-.46-.59-.48-.91-.06-1.46-.02-2.91-.05-4.37-.02-1.11,1.26-2.35,2.4-2.34,1.78.02,4.19,1.43,3.68,3.81Z"/>
                </svg>

            </div>
        </div>
    )
}

export default CreateSquad;